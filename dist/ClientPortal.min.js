(()=>{var e={d:(o,t)=>{for(var a in t)e.o(t,a)&&!e.o(o,a)&&Object.defineProperty(o,a,{enumerable:!0,get:t[a]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};(()=>{"use strict";var t;e.r(o),e.d(o,{ClientPortal:()=>n});var a=window.iFrameResize;function r(){t.classList.add("is-visible")}var n=function(){function e(e,o){var n=this;if(this._elementWrapperSelector="cp-iframe-wrapper",this._modalOverlaySelector="cp-modal-overlay",this._promiseResolveMap={},this._wasConnectedBefore=!1,!o||!o.url)throw new Error("url is not defined");this._createIframe(e,o),window.addEventListener("message",(function(e){if(e.data){var t;try{t=JSON.parse(e.data)}catch(e){return}t.isResponse?n._onResponse(t):n._onMessage(t,o,e)}})),o.hideLoadMask||!o.loadMask||o.loadMask.disable||(t||((t=document.createElement("DIV")).classList.add("cp-load-mask"),t.innerHTML="<svg class='cp-load-mask-spinner'\n        width='65px'\n        height='65px' viewBox='0 0 66 66' xmlns='http://www.w3.org/2000/svg'>\n    <circle fill='none' stroke-width='6' stroke-linecap='round' cx='33' cy='33' r='30'></circle>\n    </svg>",document.body.appendChild(t)),!o.hideInitLoadMask&&o.loadMask&&o.loadMask.disableOnInit&&r());a({checkOrigin:!1,warningTimeout:15e3},this._element)}return e.prototype._onMessage=function(e,o,t){var a=this.recieveMsg(e,o),r=JSON.stringify({id:e.id,isResponse:!0,data:a,action:e.action});e.action&&e.id&&t.source.postMessage(r,"*")},e.prototype._onResponse=function(e){if(!this._promiseResolveMap[e.id])throw new Error("No callback was specified");this._promiseResolveMap[e.id](e.data),delete this._promiseResolveMap[e.id]},e.prototype._getIframeTopOffset=function(){for(var e=this._element,o=e.offsetTop,t=e.offsetParent;e;){if(e.clientHeight!==e.scrollHeight){var a=getComputedStyle(e);if("auto"===a.overflow||"auto"===a.overflowY)return o-e.offsetTop}e===t&&(o+=e.offsetTop,t=e.offsetParent),e=e.parentElement}return o},e.prototype._getViewport=function(e){var o=this._element.getBoundingClientRect();return{navbarHeight:this._getIframeTopOffset(),top:o.top+window.scrollY,bottom:o.bottom,windowHeight:window.innerHeight,scrollTop:window.scrollY}},e.prototype.recieveMsg=function(e,o){var a,n=e.action,i=e.data;switch(n){case"child-connected":var s={loginPage:o.loginPage||{},navigation:o.navigation||{},registration:o.registration||{},calendarPage:o.calendarPage||{},minHeight:o.minHeight};this._sendData("parent-connected",s),this._wasConnectedBefore||(o.forceUrl||this.goTo(o.defaultState||"Profile",o.defaultStateParams),this._wasConnectedBefore=!0),o.onConnect&&o.onConnect();break;case"showLoadMask":o.hideLoadMask||!o.loadMask||o.loadMask.disable||r(),o.onShowLoadMask&&o.onShowLoadMask(),o.loadMask&&o.loadMask.onShow&&o.loadMask.onShow();break;case"hideLoadMask":o.hideLoadMask||!o.loadMask||o.loadMask.disable||t.classList.remove("is-visible"),o.onHideLoadMask&&o.onHideLoadMask(),o.loadMask&&o.loadMask.onHide&&o.loadMask.onHide();break;case"showModalOverlay":(!o.hideModalOverlay||o.modal&&!o.modal.disableOverlay)&&this._showModalOverlay(),o.onShowModal&&o.onShowModal(),o.modal&&o.modal.onShow&&o.modal.onShow(),a=this._getViewport(o);break;case"hideModalOverlay":(!o.hideModalOverlay||o.modal&&!o.modal.disableOverlay)&&this._hideModalOverlay(),o.onHideModal&&o.onHideModal(),o.modal&&o.modal.onHide&&o.modal.onHide();break;case"userLoggedIn":o.onUserLoggedIn&&o.onUserLoggedIn(i);break;case"userLoggedOut":o.onUserLoggedOut&&o.onUserLoggedOut(i);break;case"stateChangeSuccess":var l=this._getIframeTopOffset()-(o.topOffset||0);if((document.body.scrollTop>l||document.documentElement.scrollTop>l)&&window.scroll({top:l,left:0,behavior:"smooth"}),"Auth.Login"==i.toState.name&&this._forceResize(),!o.enableVirtualStates&&i.isVirtual)break;o.onStateChangeSuccess&&o.onStateChangeSuccess(i);break;case"mobileDropdownOpen":o.onMobileDropdownOpen&&o.onMobileDropdownOpen(),o.modal&&o.modal.onMobileOpen&&o.modal.onMobileOpen(),a=this._getViewport(o);break;case"mobileDropdownClose":o.onMobileDropdownClose&&o.onMobileDropdownClose(),o.modal&&o.modal.onMobileClose&&o.modal.onMobileClose();break;case"scrollWindow":this._getIframeTopOffset(),o.topOffset;o.onContentScroll?o.onContentScroll(i+l):window.scroll({top:i+l,left:0,behavior:"smooth"})}return a},e.prototype._createModalOverlay=function(){var e=document.createElement("DIV");return e.classList.add(this._modalOverlaySelector),e},e.prototype._showModalOverlay=function(){var e=this._element.getBoundingClientRect(),o=document.body.getBoundingClientRect(),t=this._createModalOverlay();t.style.top="-1000px",t.style.height="1000px";var a=this._createModalOverlay(),r=o.bottom-e.bottom;a.style.bottom=-1*(r-4)+"px",a.style.height=r+"px";var n=this._createModalOverlay();n.style.top=t.style.top,n.style.bottom=a.style.bottom,n.style.left=o.left-e.left+"px",n.style.right=e.width+"px";var i=this._createModalOverlay();i.style.top=t.style.top,i.style.bottom=a.style.bottom,i.style.left=e.width+"px",i.style.right=-(o.right-e.right)+"px",this._elementWrapper&&(this._elementWrapper.appendChild(t),this._elementWrapper.appendChild(a),this._elementWrapper.appendChild(n),this._elementWrapper.appendChild(i))},e.prototype._hideModalOverlay=function(){for(var e=document.getElementsByClassName(this._elementWrapperSelector)[0],o=document.getElementsByClassName(this._modalOverlaySelector),t=o.length,a=0;a<t;a+=1)e.removeChild(o[0])},e.prototype._createIframe=function(e,o){var t=this,a=document.createElement("iframe"),r=o&&o.language?"&lang=".concat(o.language):"",n=window.innerWidth<500||window.innerHeight<500?"?mode=mobile":"?mode=desktop",i=o.url;i="/"===i[i.length-1]?i:i+"/",this._companyUrl=i;var s=o.defaultState||"Profile",l=o&&o.brandingId?"&brandingId=".concat(o.brandingId):"",d="?"+this._serializeParams(o.defaultStateParams)||0;a.src=o.forceUrl||i+n+r+l+"#/"+s+d,a.style.border="none",a.style.width="1px",a.style.maxWidth="100%",a.style.minWidth="100%",e.appendChild(a),e.classList.add(this._elementWrapperSelector),a.onload=function(){var e=t._getIframeTopOffset()-(o.topOffset||0);window.scroll({top:e,left:0,behavior:"smooth"})},this._element=a,this._elementWrapper=e},e.prototype._serializeParams=function(e){var o="";for(var t in e)""!=o&&(o+="&"),o+=t+"="+encodeURIComponent(e[t]);return o},e.prototype._sendData=function(e,o){var t=this;return new Promise((function(a){for(var r=Math.round(999999*Math.random());t._promiseResolveMap[r];)r=Math.round(999999*Math.random());var n={isResponse:!1,action:e,data:o,id:r};t._element.contentWindow.postMessage(JSON.stringify(n),"*"),t._promiseResolveMap[r]=a}))},e.prototype._forceResize=function(){var e=this._element;e.style.height="",e.iFrameResizer.resize()},e.prototype.goTo=function(e,o){var t={state:e,params:o};return this._sendData("goToState",t)},e.prototype.logout=function(){return this._sendData("logout")},e.prototype.changeLanguage=function(e){return this._sendData("changeLanguage",e)},e.prototype.isUserLoggedIn=function(){return this._sendData("isUserLogged")},e.prototype.getElement=function(){return this._element},e.State={Login:"Auth.Login",Registration:"Registration",Classes:"Classes",ClassesList:"Classes.List",PersonalTraining:"PersonalTraining",ReservedClasses:"MyCalendar.AllActivities",Products:"MyProducts",BuyProducts:"BuyProducts",Profile:"Profile",ProfileEdit:"Profile.Edit",ProfilePayment:"Profile.Payment",ProfileContract:"Profile.Contract",ProfileFreeze:"Profile.Freeze",ProfilePrepaid:"Profile.Prepaid",ProfileChangePassword:"Profile.ChangePassword",ProfilePayments:"Profile.Payments",ProfileFamily:"Profile.Family"},e}()})();var t=PerfectGym="undefined"==typeof PerfectGym?{}:PerfectGym;for(var a in o)t[a]=o[a];o.__esModule&&Object.defineProperty(t,"__esModule",{value:!0})})();